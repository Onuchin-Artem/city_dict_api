
<div id='wrapper'>
  <!-- header -->
  <header id='header'>
    <div class='shell'>
      <a href="/" class="logo">API базы фактов по городам Башкортостана</a>
    </div>
  </header>
  <!-- main -->
  <div class='main'>
    <div class='shell'>
      <br>
      <h3><a href="/presentation.html" class="about">О проекте</a></h3>
      <section class='single-page scrollblock' id='introduction'>
        <div class='description'>
          <h2 class='main_head'>Краткое описание</h2>
          <p>
            Проект <b>"База фактов по городам Башкортостана"</b> позволяет получать различные <b>факты</b>
            относящиеся к городу. Под <b>фактом</b> понимается имя собственное, например, достопримечательность или
            известная личность. Каждый факт имеет источник упоминания и различные метаданные. Факты извлекаются из
            таких источников как: <b>Dbpedia, Open Steet Map и RSS-ленты </b>.
          </p>
          <p>
            Данное API можно применять для различных задач, например, связанных с обрабокой естественного языка.
            Например, можно извлекать из текста факты и с помощью метаданных (Open Street Map) указывать их на карте или предоставлять более подробную информацию ссылаясь на первоисточник.
          </p>
          <p>
            Сейчас API внедряется в
            <a href="http://rbcitynews.ru">&quot;Новостной агрегатор по городам Башкортостана&quot;.</a>
            В тестовом окружении было достигнуто улучшение качества классификации на 9.4%.
          </p>
        </div>
      </section>
      <!-- У документации следующая структура: -->
      <!-- - Документация -->
      <!-- -- Первоначальные сведения -->
      <!-- ---  Ресурсы -->
      <!-- ---  Вызов ресурсов -->
      <!-- -- Ресурсы API -->
      <!-- ---  Города -->
      <!-- ----   Все города -->
      <!-- -----    Описание -->
      <!-- -----    Входные данные* -->
      <!-- -----    Выходные данные -->
      <!-- -----    Пример для формата JSON -->
      <!-- ----  Определенный город -->
      <!-- -----    Описание -->
      <!-- -----    Входные данные* -->
      <!-- -----    Выходные данные -->
      <!-- -----    Пример для формата JSON -->
      <!-- ... аналогично для других ресурсов -->
      <!-- ... помеченные * - необязательный -->
      <div class='documentation'>
        <section class='single-page scrollblock' id='addapi'>
          <h2 class='main_head'>Документация</h2>
          <div class='main_section'>
            <section class='single-page scrollblock' id='addapi'>
              <h2 class='sub_head'>Первоначальные сведения</h2>
              API проекта <b>"База фактов по городам Башкортостана"</b>, далее просто API, построено по принципам
              REST.
              <div class='sub_section'>
                <h3 class='sub_sub_head'>Ресурсы</h3>
                <p>
                  <b>Ресурс -</b>
                  это интерфейс взаимодействия с API для получения данных определенного типа.
                  У каждого ресурса есть свой уникальный URL. Все действия выполняются методом GET протокола HTTP на URL ресурсов.
                </p>
                <p>
                  Например, чтобы получить факты относящие к городу Ишимбаю, необходимо отправить GET-запрос на URL
                  ресурса, отвечающего за факты, указав в запросе идентефикатор города.
                </p>
              </div>
              <div class='sub_section'>
                <h3 class='sub_sub_head'>Вызов ресурсов</h3>
                <p>Запросы к API передаются по протоколу HTTP.</p>
                <p>Формат запроса:</p>
                <pre>GET http://citydict.ru/api/v<версия_API>/<ресурс>.<формат_ответа>?<параметры></pre>
                <p>где:</p>
                <ul>
                  <li><версия_API> - версия API, на данный момент - <b>1</b>.</li>
                  <li><ресурс> - URL ресурса, над которым выполняется действие. Список ресурсов и их описание приведены в разделе Ресурсы API.</li>
                  <li><формат ответа> - это необязательная часть запроса, которая влияет на способ представления ответа.Возможные форматы ответа: XML и JSON. По умолчанию данные передаются в формате JSON.</li>
                  <li><параметры> - необязательные параметры запроса, которые не входят в состав URL ресурса. Например, для некоторых ресурсов можно передавать параметр page - номер страниц. Остальные параметры зависят от конкретного ресурса и приведены в описании ресурсов.</li>
                </ul>
                <p class='note'>API возвращает ответы в кодировке UTF-8.</p>
              </div>
            </section>
          </div>
          <div class='main_section'>
            <section class='single-page scrollblock' id='addapi'>
              <h2 class='sub_head'>Ресурсы API</h2>

              <h3 class='sub_sub_head'>Города</h3>
              <div class='sub_section'>
                <h4 class='sub_sub_sub_head'>Все города</h4>
                <h5>Описание</h5>
                <pre>cities</pre>
                <p>Возвращает список всех городов с которыми работает API.</p>
                <p>URL ресурса:</p>
                <pre>http://citydict.ru/api/v1/cities.[format]</pre>
                <h5>Выходные данные:</h5>
                <p>Структура выходных данных для формата JSON:</p>
                <pre>
                    [
                      {              
                        "eng_name": <Название города на английском>,
                        "id": <Идентификатор города>,
                        "name": <Название города>             
                      },
                      ...
                    ]
                </pre>
                <h5>Пример для формата JSON</h5>
                <p>Пример запроса:</p>
                <pre>GET http://citydict.ru/api/v1/cities.json</pre>
                <p>Пример ответа:</p>
                <pre>
                  {
                    "cities": [
                      {
                        "id": 1,
                        "name": "Ишимбай",
                        "eng_name": "Ishimbay"
                      },
                      {
                        "id": 2,
                        "name": "Стерлитамак",
                        "eng_name": "Sterlitamak"
                      }
                    ]
                  }
              </pre>
              </div>
              <div class='sub_section'>
                <h4 class='sub_sub_sub_head'>Определенный город</h4>
                <h5>Описание</h5>
                <pre>cities/{city_id}</pre>
                <p>Возвращает информацию о городе. В запросе вместо {city_id} указывается идентификатор города.</p>
                <p>URL ресурса:</p>
                <pre>http://citydict.ru/api/v1/cities/{city_id}.[format]</pre>
                <h5>Выходные данные:</h5>
                <p>Структура выходных данных для формата JSON:</p>
                <pre>
                {
                  "city": {
                    "eng_name": <Название города на английском>,
                    "id": <Идентификатор города>,
                    "name": <Название города>      
                  }
                }
                </pre>
                <h5>Пример для формата JSON</h5>
                <p>Пример запроса:</p>
                <pre>GET http://citydict.ru/api/v1/cities/1.json</pre>
                <p>Пример ответа:</p>
                <pre>
                      {
                        "city": {
                          "id": 1,
                          "name": "Ишимбай",
                          "eng_name": "Ishimbay"
                        }
                      }
                </pre>
              </div>
              
              <h3 class='sub_sub_head'>Типы (категории)</h3>
              <div class='sub_section'>
                <h4 class='sub_sub_sub_head'>Все типы</h4>
                <h5>Описание</h5>
                <pre>types</pre>
                <p>Возращает список из названий типов (категорий).</p>
                <p>URL ресурса:</p>
                <pre>http://citydict.ru/api/v1/types.[format]</pre>
                <h5>Выходные данные:</h5>
                <p>Структура выходных данных для формата JSON:</p>
                <pre>
                    [
                      <Название типа (категории)>,
                      ...
                    ]
                </pre>
                <h5>Пример для формата JSON</h5>
                <p>Пример запроса:</p>
                <pre>GET http://citydict.ru/api/v1/types.json</pre>
                <p>Пример ответа:</p>
                <pre>
                  [
                    "college",
                    "kindergarten",
                    "school"
                  ]
                </pre>
              </div>              

              <h3 class='sub_sub_head'>Факты</h3>
              <div class='sub_section'>                              
                <h4 class='sub_sub_sub_head'>Все факты</h4>
                <h5>Описание</h5>
                <pre>words</pre>
                <p>Возвращает список фактов с метаданными.</p>
                <p>URL ресурса:</p>
                <pre>http://citydict.ru/api/v1/words.[format]</pre>
                <h5>Входные данные</h5>
                <table border=1>
                  <tr>
                    <td>Параметр</td>
                    <td>Тип</td>
                    <td>Значение</td>
                  </tr>            
                  <tr>
                  <b>Необязательные параметры</b>
                  </tr>
                  <tr>
                    <td>page</td>
                    <td>Число</td>
                    <td>Номер страницы результатов, которую необходимо показать в ответе.
                        Значение по умолчанию: 1. По умолчанию выводится 30 элементов на страницу.</td>
                  </tr>      
                  <tr>
                    <td>type</td>
                    <td>Строка</td>
                    <td>Фильтрация фактов по названию типа (категории). Ресурс категорий описан выше.</td>
                  </tr>
                  <tr>
                    <td>name</td>
                    <td>Строка</td>
                    <td>Фильтрация фактов по названию.</td>
                  </tr>
                </table>
                <h5>Выходные данные</h5>
                <p>Структура выходных данных для формата JSON:</p>
                <pre>
                    {
                      "per_page": <Количество фактов на страницу>,
                      "pages_count": <Количество страниц>,
                      "current_page": <Текущая страница>,
                      "words": [
                        {
                          "id": <Индентификатор факта>,
                          "name": <Название факта>,
                          "normalized_name": <Нормализованное название факта>,
                          "metadata": [
                            {
                              "city_id": <Идентификатор города>,
                              "created_at": <Дата добавления метаданного в API>,
                              "id": <Идентификатор метаданного>,
                              "other": {
                                <Дополнительные метаданные, зависят от параметра source>
                              },
                              "source": <Источник метаданного>,
                              "type_name": <Название типа (категории)>,
                              "updated_at": <Дата обновления метаданного в API>,
                              "url": <Источник метаданного>,
                              "vocabulary_entry_id": <Идентификатор факта>
                            },
                            ...
                          ]
                        },
                        ...
                      ]
                    }
                </pre>
                <h5>Пример для формата JSON</h5>
                <p>Пример запроса:</p>
                <pre>GET http://citydict.ru/api/v1/words.json?page=4</pre>
                <p>Пример ответа:</p>
                <pre>
                {
                  "per_page": 30,
                  "pages_count": 17,
                  "current_page": "4",
                  "words": [
                    {
                      "id": 591,
                      "name": "Отделение связи №452689",
                      "normalized_name": "отделение связи №452689",
                      "metadata": [
                        {
                          "city_id": 5,
                          "created_at": "2013-09-26T18:48:47Z",
                          "id": 595,
                          "other": {
                            "osm_id": "2008461899",
                            "bounding_box": "{:top=>56.1428, :left=>54.1406, :bottom=>55.9649, :right=>54.4221}"
                          },
                          "source": "osm",
                          "type_name": "post_office",
                          "updated_at": "2013-09-26T18:48:47Z",
                          "url": null,
                          "vocabulary_entry_id": 591
                        }
                      ]
                    }
                  ]
                }
                </pre>
                
                <h4 class='sub_sub_sub_head'>Факты для определенного города</h4>
                <h4 class='sub_sub_sub_head'>Определенный факт</h4>
              </div>
            </section>
          </div>
        </section>
      </div>
    </div>
  </div>
  <div id='footer'>
    <div class='shell'>
      <p class='copy'><a href="http://events.yandex.ru/events/meetings/hack/">Яндекс Хакатон 2013</a></p>
    </div>
  </div>
</div>